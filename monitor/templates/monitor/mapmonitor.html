{% extends '_vbase_amap.html' %}

{% load staticfiles %}

{% block stylesheet %}
<style type="text/css">
        #container {
            background-color: white !important;
        }

        #thetree {
            height: 20000px;
        }

        #MapContainer {
            height: 20000px;
        }

        #dataTableBind td {
            padding: 7px 10px;
        }
        .toolOperateClick .map-call::before{
            content:"";position:relative;display:inline-block;top:6px;left:0;width:22px;height:22px;background-image:url(/clbs/resources/img/call-off.png)!important;background-size:22px 22px
        }
        .toolOperateClick .map-call.active::before{content:"";position:relative;display:inline-block;top:6px;left:0;width:22px;height:22px;background-image:url(/clbs/resources/img/call-on.png)!important;background-size:22px 22px}

        #MapContainer {width:1600px; height: 850px; }  


.overlay2 {
    display: none;
    position: absolute;
    background: rgba(255,255,255,0.9);
    box-shadow: 0 0 10px 0 rgba(0,0,0,0.25);
    padding: 15px;
    border-radius: 10px;
    border: 1px solid #ccc;
    width: 400px;
    /*top: -76px;*/
    left: -90px;
    user-select: none;
}

.overlay2:after {
    /*top: 100%;*/
    border: 10px solid transparent;
    content: "";
    height: 0;
    width: 0;
    position: absolute;
    border-top-color: rgba(255,255,255,0.9);
}


.overlay button + button {
    float: right;
}

.info {
    /*display: none;*/
    /*position: absolute;*/
    padding: 10px;
    border-radius: 10px;
    background: rgba(255,255,255,0.9);
    font-family:'微软雅黑';
    font-weight:400;
    font-style:normal;
    font-size:12px;
    
    
}

.span2 {
  font-family:'微软雅黑 Bold', '微软雅黑 Regular', '微软雅黑';
  font-weight:700;
  font-style:normal;
  font-size:12px;
  color:#0099CC;
  margin-left: 10px;
}

.span1 {
  
  margin-left: 10px;
}

.span3 {
  font-family:'微软雅黑 Bold', '微软雅黑 Regular', '微软雅黑';
  font-weight:700;
  font-style:normal;
  font-size:12px;
  color:#008000;
  margin-left: 10px;
}

.span4 {
  font-family:'微软雅黑 Bold', '微软雅黑 Regular', '微软雅黑';
  font-weight:700;
  font-style:normal;
  font-size:12px;
  color:red;
  margin-left: 10px;
}

    </style>
{% endblock %}


{% block content_left %}
    <div id="content-left" class="col-md-2" style="padding-right: 0px; padding-left: 0px;">
        <div style="background-color: rgba(0, 153, 204, 1);" >
            <div style="font-family: '微软雅黑 Bold', '微软雅黑 Regular', '微软雅黑';font-weight: 700;font-style: normal;font-size: 14px;color: white;margin: 10px 10px 0 20px;">全部站点(1251)
            </div>
        </div>
        <div style="background:#fff;">
            <div class="form-group">
              <label class="col-md-6 control-label" style="margin-top:10px;color: #1627e0;">在线(6)</label>
              <label class="col-md-6 control-label" style="margin-top:10px;color: grey;">离线(0)</label>
            </div>
            <div class="form-group">
              <label class="col-md-6 control-label" style="margin-top:10px;color: #f20804;">报警站点(0)</label>
              <label class="col-md-6 control-label" style="margin-top:10px;color: #02470e;">关注站点(0)</label>
            </div>
            <div class="form-group">
              <label class="col-md-6 control-label" style="margin-top:10px;margin-bottom:20px;color: #8c4380;">大用户站点(0)</label>
              
            </div>
        </div>

        <div class="col-md-12" style="padding-right: 0px; padding-left: 0px;">
            <div class="panel panel-default">
                <div class="panel-heading">
                  <h3 class="panel-title fwb">DMA分区</h3>
                  <div class="actions  listActions">
                    <i class="fa fa-chevron-down"></i>
                  </div>
                </div>
                <div class="panel-body" style="padding: 0px;">
                  <div class="form-group" style="margin-top: 15px;">
                    <div class="col-md-12">
                      <input id="search_condition" name="search" class="form-control" style="margin-bottom: 10px;" type="text" placeholder="请输入组织名称" />
                    </div>
                  </div>
                  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12  panelCarBg" style="padding: 0px;height:100%!important">
                    <ul id="treeDemo" class="ztreee" style="overflow:scroll;overflow-y: auto;height:460px!important"></ul>
                  </div>
                </div>
            </div>
        </div>

        


    </div>
{% endblock content_left %}

{% block main_content %}

<div id="content-right" class="col-md-10 content-right" >
    <div >
        <!-- <div id="js-map" class="map"></div> -->
        
      <div id="MapContainer" ></div> 
      <input type="hidden" id="current_dma_no" name="">
      <input type="hidden" id="current_organ_id" name="">

      <div id="js-overlay" class="overlay2" >
            <div class="form-group">
              <label class="col-md-5 control-label" style="margin-right: 0;text-align: right;">分区名称:</label>
              <label class="col-md-7 control-label" id="dma_name"><span style="color: #0099CC;"></span></label>
            </div>
            <div class="form-group">
              <label class="col-md-5 control-label" style="margin-right: 0;text-align: right;">所属组织:</label>
              <label class="col-md-7 control-label" id="belongto"><span "></span></label>
            </div>
            <div class="form-group">
              <label class="col-md-5 control-label" style="margin-right: 0;text-align: right;">分区层级:</label>
              <label class="col-md-7 control-label" id="dma_level"><span "></span></label>
            </div>
            <br>
            <div class="form-group">
              <label class="col-md-5 control-label" style="margin-right: 0;text-align: right;">状态:</label>
              <label class="col-md-7 control-label" id="dma_status"><span style="color: #2ce80b;"></span></label>
            </div>
            <div class="form-group">
              <label class="col-md-5 control-label" style="margin-right: 0;text-align: right;">分区流量:</label>
              <label class="col-md-7 control-label" id="dmaflow"><span ></span></label>
            </div>
            <div class="form-group">
              <label class="col-md-5 control-label" style="margin-right: 0;text-align: right;">当月售水量:</label>
              <label class="col-md-7 control-label" id="month_sale"><span ></span></label>
            </div>
            <div class="form-group">
              <label class="col-md-5 control-label" style="margin-right: 0;text-align: right;">上月售水量:</label>
              <label class="col-md-7 control-label" id="lastmonth_sale"><span ></span></label>
            </div>
            <div class="form-group">
              <label class="col-md-5 control-label" style="margin-left: 0,margin-right: 0;text-align: right;">上月增长比例:</label>
              <label class="col-md-7 control-label" id="bili"><span ></span></label>
            </div>
          
          
    </div>
        

    </div>
    <div class="row" id="fenceBindTable">
          <div class="col-md-12">
              <div class="panel panel-default">
                  <div class="panel-heading">
                      <h3 class="panel-title fwb">绑定列表</h3>
                      <div class="pull-right" id="bingListClick">
                          <i class="fa fa-chevron-up"></i>
                      </div>
                  </div>
                  <div class="panel-body fixed-table-body">
                      <!--工具面板-->
                      <div class="ToolPanel">
                          <div class="bars pull-left">
                              <div class="btn-group pull-left barsMargin" role="group">
                                  <form role="form">
                                      <label><input type="text"
                                                    class="Inlinesearch form-control"
                                                    id="simpleQueryParam"
                                                    name="simpleQueryParam"
                                                    style="width:300px"
                                                    placeholder="请输入监控对象/围栏 关键字"></label>
                                      <button id="search_button" type="button"
                                              class="btn btn-outline btn-default">搜索
                                      </button>
                                      <input id="hiddenText" type="text"
                                             style="display:none"/>
                                  </form>
                              </div>
                              <div class="dropdown pull-left">
                                  <button class="btn btn-default dropdown-toggle"
                                          type="button" id="dropdownMenu1"
                                          data-toggle="dropdown" aria-haspopup="true"
                                          aria-expanded="true">
                                      操作菜单<span class="caret"></span>
                                  </button>
                                  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                                      <li><a href="javascript:void(0);" id="send_model"><i
                                              class="glyphicon glyphicon-circle-arrow-down icoPaddingLeft"></i>批量下发</a>
                                      </li>
                                      <li><a href="javascript:void(0);" id="del_model"><i
                                              class="glyphicon glyphicon-trash icoPaddingLeft"></i>批量解除</a>
                                      </li>
                                  </ul>
                              </div>
                          </div>
                          <div class="columns btn-group pull-right fenceBinding">
                              <button id="refreshTable" class="btn btn-default" type="button"
                                      name="refresh" title="刷新">
                                  <i class="glyphicon glyphicon-refresh icon-refresh"></i>
                              </button>
                              <div class="keep-open btn-group" title="定制显示列">
                                  <button id="customizeColumns" type="button"
                                          class="btn btn-default dropdown-toggle"
                                          data-toggle="dropdown">
                                      <i class="glyphicon glyphicon-th icon-th"></i> <span
                                          class="caret"></span>
                                  </button>
                                  <ul class="dropdown-menu" role="menu"
                                      id="Ul-menu-text-bind">
                                  </ul>
                              </div>
                          </div>
                      </div>
                      <table id="dataTableBind"
                             class="table table-striped table-bordered table-hover"
                             cellspacing="0" width="100%">
                          <thead>
                          <tr>
                              <th style=" width:1px; padding:0"></th>
                              <th style="width:30px; padding:8px"><input type="checkbox"
                                                                         id="tableCheckAll">
                              </th>
                              <th>操作设置</th>
                              <th>围栏类型</th>
                              <th>围栏名称</th>
                              <th>监控对象</th>
                              <th>下发状态</th>
                              <th>下发类型</th>
                              <th>报警来源</th>
                              <th>开始日期</th>
                              <th>结束日期</th>
                              <th>开始时间</th>
                              <th>结束时间</th>
                              <th>驶入报警给平台</th>
                              <th>驶出报警给平台</th>
                              <th>驶入报警给驾驶员</th>
                              <th>驶出报警给驾驶员</th>
                              <th>最高速度(km/h)</th>
                              <th>超速持续时间(s)</th>
                              <th>行驶时间过长阈值(s)</th>
                              <th>行驶时间不足阈值(s)</th>
                              <th>允许开门</th>
                              <th>进区域开启通信模块</th>
                              <th>进区域不采集GNSS定位数据</th>
                          </tr>
                          </thead>
                      </table>
                  </div>
              </div>
          </div>
      </div>

</div>


    
{% endblock main_content %}

 

{% block javascript %}
  <script type="text/javascript">
     
    var  statsinfo = {{ dmastasticinfo|safe }};
    
    
 </script>
    <!-- <script src="http://webapi.amap.com/maps?v=1.4.6&key=f034871b532a7bfb2d93f18e915b322c&plugin=AMap.DistrictSearch"></script> -->
    <script src="http://webapi.amap.com/maps?v=1.4.6&key=f034871b532a7bfb2d93f18e915b322c&plugin=AMap.DistrictSearch,AMap.MouseTool,AMap.Driving,AMap.Autocomplete,AMap.Geocoder,AMap.PlaceSearch,AMap.PolyEditor,AMap.CircleEditor,AMap.MarkerClusterer"></script>

<script src="{% static 'virvo/wro/mapmonitor.js' %}"></script>
 
{% endblock %}